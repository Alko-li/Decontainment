; TODO: Make some of these integrated?

Inf: 1000000000

Sync: 0
Async: 1

TAR_Near: 0
TAR_Far: 1

DRV_Forward: 0
DRV_Backward: 1
DRV_Left: 2
DRV_Right: 3

TRN_Left: 0
TRN_Right: 1

SCN_Projectiles: 0
SCN_Obstacles: 1
SCN_Allies: 2
SCN_Enemies: 3

TAR R0 TAR_Near

TrackNShoot:
; Turn to face enemy
HED R1 R0
TRN TRN_Left R1 Async

; If within 10 degrees
HED R1 R0
ABS R1 R1
BGT TrackNShoot R1 10

; If not within range
SCN R1 SCN_Enemies 0 3 10
BGT Shoot R1 0

; Drive
DRV DRV_Forward Inf Async
BEQ TrackNShoot R0 R0

; Else stop and shoot
Shoot:
DRV     ; Halt
SHT Async
;SLP 20
BEQ TrackNShoot R0 R0